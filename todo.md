# Langger 产品开发任务清单

## 📝 文档说明

> **最后更新**：2024-12-19  
> **维护者**：产品团队

本文档采用清单方式管理所有开发任务，按状态分类，并明确标注实施者。

---

## ✅ 一、已实现并验收

### 1.1 测试模式功能（Test Mode）

| 任务 ID | 任务名称           | 优先级 | 预计工时 | 实际工时 | 完成时间   | 实施者   | 验收状态  |
| ------- | ------------------ | ------ | -------- | -------- | ---------- | -------- | --------- |
| 1.1.1   | 实现双向选择题功能 | P0     | 8 小时   | 8 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 1.1.2   | 实现倒计时功能     | P0     | 4 小时   | 4 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 1.1.3   | 测试结果统计与展示 | P1     | 4 小时   | 4 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 1.2.1   | 集成到 Study 页面  | P0     | 2 小时   | 2 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |

**实现详情**：

- ✅ 任务 1.1.1：实现了单词 ↔ 意思双向选择题，4 个选项（1 正确+3 干扰），干扰项从同一单词集选择
- ✅ 任务 1.1.2：每道题 30 秒倒计时，超时自动标记错误，支持页面切换处理
- ✅ 任务 1.1.3：显示测试统计（总题数、正确率、平均时间）和错题回顾
- ✅ 任务 1.2.1：在 Study 页面集成测试模式，更新统计数据
- ✅ 额外优化：根据掌握程度自动决定测试的单词和数量（10-50 题动态调整）

### 1.2 复习模式功能（Review Mode）

| 任务 ID | 任务名称                           | 优先级 | 预计工时 | 实际工时 | 完成时间   | 实施者   | 验收状态  |
| ------- | ---------------------------------- | ------ | -------- | -------- | ---------- | -------- | --------- |
| 2.1.1   | 实现艾宾浩斯遗忘曲线算法           | P0     | 12 小时  | 12 小时  | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 2.1.2   | 实现复习通知机制                   | P0     | 8 小时   | 8 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 2.2.1   | 实现复习锁定机制                   | P0     | 6 小时   | 6 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 2.2.2   | 实现复习进度跟踪                   | P0     | 6 小时   | 6 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 2.3.1   | 实现复习队列管理                   | P1     | 8 小时   | 8 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 2.4.1   | 创建复习学习组件                   | P0     | 10 小时  | 10 小时  | 2024-12-19 | 编程专家 | ✅ 已实现 |
| 2.4.2   | 实现复习完成条件判断与阶段完成标记 | P0     | 6 小时   | 6 小时   | 2024-12-19 | 编程专家 | ✅ 已验收 |
| 2.4.3   | 实现"重新复习当前阶段"功能         | P1     | 8 小时   | 8 小时   | 2024-12-19 | 编程专家 | ✅ 已验收 |

**实现详情**：

- ✅ 任务 2.1.1：实现了 8 次复习时间点（1 小时、1 天、2 天、4 天、7 天、15 天、30 天、60 天）
- ✅ 任务 2.1.2：应用启动和每分钟检查复习通知，显示在 Study 页面顶部
- ✅ 任务 2.2.1：开始复习后锁定当前课程，必须完成才能选择其他课程
- ✅ 任务 2.2.2：在单词集管理页面显示复习进度（阶段、完成次数、下次复习时间）
- ✅ 任务 2.3.1：多个课程复习时间重叠时，按时间顺序排队
- ✅ 任务 2.4.1：创建 ReviewStudy 组件，显示复习阶段和进度
- ✅ 任务 2.4.2：复习完成条件判断逻辑正确，只有全部掌握才能进入下一阶段
- ✅ 任务 2.4.3：重新复习功能完整，用户体验良好，国际化支持完整
- ✅ 额外优化：新学习的单词有独立的复习计划，不会影响现有复习曲线

### 1.3 数据库设计

| 任务 ID | 任务名称                      | 优先级 | 预计工时 | 实际工时 | 完成时间   | 实施者   | 验收状态  |
| ------- | ----------------------------- | ------ | -------- | -------- | ---------- | -------- | --------- |
| 7.2.1   | 添加复习计划表（ReviewPlans） | P0     | 6 小时   | 6 小时   | 2024-12-19 | 编程专家 | ✅ 已实现 |

**实现详情**：

- ✅ 任务 7.2.1：新增 reviewPlans 表，支持 8 次复习阶段跟踪，包含 learnedWordIds 字段用于区分不同学习批次

---

## 🔄 二、待开发任务

### 2.1 测试模式功能（Test Mode）

~~所有测试模式功能已完成，详见"一、已实现并验收"章节。~~

---

### 2.2 复习模式功能（Review Mode）

~~所有复习模式功能已完成，详见"一、已实现并验收"章节。~~

---

### 2.3 架构设计与优化

| 任务 ID | 任务名称               | 优先级 | 预计工时 | 状态   | 实施者                | 协作角色       |
| ------- | ---------------------- | ------ | -------- | ------ | --------------------- | -------------- |
| A1      | 状态管理架构优化       | P1     | 16 小时  | 待设计 | 高级架构师 → 编程专家 | -              |
| A2      | 错误处理与监控体系     | P1     | 12 小时  | 待设计 | 高级架构师 → 编程专家 | -              |
| A3      | 性能优化架构设计       | P1     | 20 小时  | 待设计 | 高级架构师 → 编程专家 | 数据库设计专家 |
| A4      | 数据迁移与版本管理优化 | P2     | 8 小时   | 待设计 | 高级架构师 → 编程专家 | 数据库设计专家 |
| A5      | 测试架构设计           | P1     | 24 小时  | 待设计 | 高级架构师 → 编程专家 | 测试专家       |

**任务说明**：

- **A1**：设计状态管理方案（Zustand/Context API），迁移现有状态
- **A2**：实现全局错误边界、统一错误处理、性能监控
- **A3**：数据库查询优化、Web Worker 计算、缓存策略、虚拟滚动
- **A4**：模块化迁移逻辑、迁移回滚机制、数据完整性校验
- **A5**：配置 Vitest 测试环境，实现单元测试、集成测试、CI/CD

---

### 2.4 数据库设计与优化

| 任务 ID   | 任务名称                          | 优先级 | 预计工时   | 状态          | 实施者       | 协作角色         |
| --------- | --------------------------------- | ------ | ---------- | ------------- | ------------ | ---------------- |
| 7.1.1     | 数据库架构全面评估                | P0     | 4 小时     | 待实施        | 编程专家     | 高级架构师       |
| ~~7.2.1~~ | ~~添加复习计划表（ReviewPlans）~~ | ~~P0~~ | ~~6 小时~~ | ~~✅ 已完成~~ | ~~编程专家~~ | ~~产品经理专家~~ |
| 7.2.2     | 优化 userSettings 表结构          | P1     | 3 小时     | 待实施        | 编程专家     | 高级架构师       |
| 7.3.1     | 优化 wordProgress 表索引          | P1     | 4 小时     | 待实施        | 编程专家     | -                |
| 7.3.2     | 优化 reviewLogs 表索引            | P2     | 2 小时     | 待实施        | 编程专家     | -                |
| 7.4.1     | 实现数据一致性检查与修复          | P1     | 6 小时     | 待实施        | 编程专家     | 产品经理专家     |
| 7.5.1     | 实现 reviewLogs 数据归档          | P2     | 8 小时     | 待实施        | 编程专家     | 产品经理专家     |
| 7.6.1     | 实现查询缓存机制                  | P2     | 6 小时     | 待实施        | 编程专家     | 高级架构师       |
| 7.7.1     | 实现数据导出/导入功能             | P1     | 8 小时     | 待实施        | 编程专家     | 产品经理专家     |

**任务说明**：

- **7.1.1**：评估当前数据库架构，分析索引使用和性能问题
- ~~**7.2.1**：新增 reviewPlans 表，支持 8 次复习阶段跟踪（核心功能依赖）~~ ✅ 已完成
- **7.2.2**：将会话状态移至独立表，优化 userSettings 性能
- **7.3.1**：优化 wordProgress 索引，从 13 个减少到 5 个（保留高频查询字段）
- **7.3.2**：优化 reviewLogs 索引，支持高效历史记录查询
- **7.4.1**：实现数据一致性检查和自动修复功能
- **7.5.1**：实现 reviewLogs 归档策略（90 天内完整保留，90-365 天聚合）
- **7.6.1**：实现查询缓存机制，提升响应速度
- **7.7.1**：实现数据导出/导入功能，支持选择性导入

---

### 2.5 UI/UX 优化

| 任务 ID | 任务名称     | 优先级 | 预计工时 | 状态   | 实施者   | 依赖任务     |
| ------- | ------------ | ------ | -------- | ------ | -------- | ------------ |
| 4.1     | 统一设计风格 | P1     | 6 小时   | 待开发 | 编程专家 | 1.1.1, 2.4.1 |

**任务说明**：

- **4.1**：测试模式和复习模式 UI 与闪卡模式保持一致，支持主题切换和响应式设计

---

### 2.6 测试与文档

| 任务 ID | 任务名称     | 优先级 | 预计工时 | 状态   | 实施者       | 依赖任务     |
| ------- | ------------ | ------ | -------- | ------ | ------------ | ------------ |
| 5.1     | 功能测试     | P1     | 8 小时   | 待开发 | 测试专家     | 所有功能任务 |
| 6.1     | 更新项目文档 | P2     | 2 小时   | 待开发 | 产品经理专家 | 所有功能任务 |

**任务说明**：

- **5.1**：编写单元测试覆盖核心算法，进行集成测试和用户体验测试
- **6.1**：更新 README.md，添加测试模式和复习模式说明，更新算法文档

---

## 📊 三、任务统计

### 3.1 按状态统计

- **已实现并验收**：13 个任务
  - 测试模式：4 个任务
  - 复习模式：8 个任务
  - 数据库设计：1 个任务
- **待开发**：17 个任务
  - 待设计：5 个（架构任务）
  - 待实施：12 个（功能任务）

### 3.2 按优先级统计

- **P0（核心功能）**：3 个任务（待开发）
- **P1（重要功能）**：9 个任务（待开发）
- **P2（优化功能）**：5 个任务（待开发）

### 3.3 按实施者统计

- **编程专家**：12 个任务（待开发）
- **高级架构师**：5 个任务（设计阶段）
- **测试专家**：1 个任务
- **产品经理专家**：1 个任务

---

## 📅 四、开发计划

### 第一阶段：数据库与核心功能 ✅ 已完成

**优先级：P0**

~~1. 任务 7.2.1：添加复习计划表（ReviewPlans）~~ ✅ 已完成
~~2. 任务 2.1.1：实现艾宾浩斯遗忘曲线算法~~ ✅ 已完成
~~3. 任务 2.2.1：实现复习锁定机制~~ ✅ 已完成
~~4. 任务 2.4.1：创建复习学习组件~~ ✅ 已完成

**待完成**：

1. 任务 7.1.1：数据库架构全面评估

### 第二阶段：测试模式开发 ✅ 已完成

**优先级：P0**

~~1. 任务 1.1.1：实现双向选择题功能~~ ✅ 已完成
~~2. 任务 1.1.2：实现倒计时功能~~ ✅ 已完成
~~3. 任务 1.1.3：测试结果统计与展示~~ ✅ 已完成
~~4. 任务 1.2.1：集成到 Study 页面~~ ✅ 已完成

### 第三阶段：复习模式完善 ✅ 已完成

**优先级：P0-P1**

~~1. 任务 2.1.2：实现复习通知机制~~ ✅ 已完成
~~2. 任务 2.2.2：实现复习进度跟踪~~ ✅ 已完成
~~3. 任务 2.3.1：实现复习队列管理~~ ✅ 已完成

**待完成**：

1. 任务 4.1：统一设计风格

### 第四阶段：架构优化（预计 3-4 周）

**优先级：P1**

1. 任务 A2：错误处理与监控体系
2. 任务 A3：性能优化架构设计
3. 任务 A5：测试架构设计
4. 任务 7.3.1：优化 wordProgress 表索引
5. 任务 7.4.1：实现数据一致性检查与修复

### 第五阶段：测试与发布（预计 1 周）

**优先级：P1-P2**

1. 任务 5.1：功能测试
2. 任务 6.1：更新项目文档
3. 任务 A1：状态管理架构优化（可选）
4. 任务 7.7.1：实现数据导出/导入功能

---

## 🔗 五、任务依赖关系

### 关键依赖链

~~以下依赖链已完成：~~

~~```
7.2.1 (数据库) ✅
↓
2.1.1 (艾宾浩斯算法) ✅
↓
2.2.1 (复习锁定) + 2.4.1 (复习组件) ✅
↓
2.1.2 (复习通知) + 2.2.2 (进度跟踪) ✅
↓
2.3.1 (队列管理) ✅

````~~

~~```
1.1.1 (选择题) ✅
  ↓
1.1.2 (倒计时) ✅
  ↓
1.1.3 (结果统计) ✅
  ↓
1.2.1 (集成) ✅
```~~

---

## 📝 六、角色职责说明

### 高级架构师

- 负责架构设计任务（A1-A5）
- 设计状态管理、错误处理、性能优化方案
- 协作确认数据库设计、缓存策略

### 数据库设计专家

- 负责数据库表结构设计
- 优化索引策略
- 设计数据迁移方案
- 提供数据库性能优化建议

### 产品经理专家

- 确认产品需求和交互细节
- 验收功能实现
- 更新项目文档
- 协调资源分配

### 编程专家

- 负责所有代码实现任务
- 实现功能、优化性能
- 编写单元测试
- 修复 Bug

### 测试专家

- 设计测试架构
- 编写测试用例
- 执行功能测试和集成测试
- 提供测试报告

---

## 📌 七、注意事项

1. **数据迁移**：所有数据库 Schema 变更都需要完整的迁移逻辑，确保现有用户数据不丢失
2. **向后兼容**：新功能不应影响现有闪卡模式的正常使用
3. **性能优化**：复习通知检查频率需要平衡实时性和性能
4. **用户体验**：复习锁定机制需要清晰的提示，避免用户困惑
5. **错误处理**：所有异步操作都需要完善的错误处理和用户提示
6. **代码质量**：遵循项目代码规范，保持代码可读性和可维护性

---

## 📚 八、详细需求文档

如需查看任务的详细需求描述、技术实现要点、验收标准等信息，请参考：

- **测试模式详细需求**：见原文档"一、测试模式（Test Mode）功能开发"章节
- **复习模式详细需求**：见原文档"二、复习模式（Review Mode）功能开发"章节
- **架构设计详细方案**：见原文档"🏗️ 架构设计 & 系统优化"章节
- **数据库设计详细方案**：见原文档"🗄️ 七、数据库设计方案"章节

---

**文档维护记录**：

- **2024-12-19 - 产品经理专家**：重构文档为清单格式，按状态分类并标注实施者
- **2024-12-19 - 编程专家**：更新已完成任务状态，测试模式和复习模式核心功能已全部实现
- **2024-12-19 - 产品经理专家**：安排下一步任务，明确各角色职责

---

## 🎯 九、当前阶段任务安排

### 9.1 本周任务分配（2024-12-19 起）

#### 📋 编程专家任务

**优先级：P0（立即开始）**

1. **任务 7.1.1：数据库架构全面评估**
   - **预计工时**：4 小时
   - **截止时间**：2024-12-21
   - **协作角色**：高级架构师（协助性能分析工具设计）
   - **交付物**：
     - 数据库架构评估报告
     - 索引使用情况分析
     - 性能基准数据
     - 数据一致性检查工具（基础版）
   - **验收标准**：
     - [ ] 完成数据库架构评估报告
     - [ ] 识别所有潜在问题和优化点
     - [ ] 提供性能基准数据
     - [ ] 数据一致性检查工具可用

**优先级：P1（并行进行）**

2. **任务 4.1：统一设计风格**
   - **预计工时**：6 小时
   - **截止时间**：2024-12-23
   - **依赖任务**：1.1.1, 2.4.1（已完成，可立即开始）
   - **交付物**：
     - 测试模式和复习模式 UI 风格统一
     - 支持深色/浅色主题切换
     - 响应式设计完善（横屏/竖屏）
   - **验收标准**：
     - [ ] 所有学习模式 UI 风格统一
     - [ ] 支持主题切换
     - [ ] 响应式设计完善

#### 🏗️ 高级架构师任务

**优先级：P1（立即开始设计）**

1. **任务 A2：错误处理与监控体系**
   - **预计工时**：12 小时（设计 4 小时 + 实施 8 小时）
   - **设计截止时间**：2024-12-22
   - **实施者**：编程专家（设计完成后）
   - **交付物**：
     - 全局错误边界设计方案
     - 统一错误处理层设计
     - 数据库操作包装方案
     - 性能监控方案
   - **验收标准**：
     - [ ] 错误处理架构设计文档完成
     - [ ] 编程专家可基于设计开始实施
     - [ ] 设计方案经过评审

**优先级：P1（设计阶段）**

2. **任务 A5：测试架构设计**
   - **预计工时**：24 小时（设计 8 小时 + 实施 16 小时）
   - **设计截止时间**：2024-12-26
   - **协作角色**：测试专家（确认测试策略）
   - **实施者**：编程专家（设计完成后）
   - **交付物**：
     - Vitest 测试环境配置方案
     - 测试目录结构设计
     - Mock 策略设计
     - CI/CD 测试流程设计
   - **验收标准**：
     - [ ] 测试架构设计文档完成
     - [ ] 测试专家确认测试策略
     - [ ] 编程专家可基于设计开始实施

#### 🧪 测试专家任务

**优先级：P1（准备阶段）**

1. **任务 5.1：功能测试准备**
   - **预计工时**：4 小时（准备阶段）
   - **截止时间**：2024-12-23
   - **状态**：等待架构设计完成后开始正式测试
   - **当前任务**：
     - 熟悉已实现的功能（测试模式、复习模式）
     - 准备测试用例大纲
     - 准备测试环境
   - **交付物**：
     - 测试用例大纲
     - 测试环境准备就绪
   - **验收标准**：
     - [ ] 测试用例大纲完成
     - [ ] 测试环境准备就绪
     - [ ] 熟悉所有已实现功能

#### 📝 产品经理专家任务

**优先级：P1（持续进行）**

1. **功能验收与文档更新准备**
   - **预计工时**：持续进行
   - **当前任务**：
     - 验收已完成的测试模式和复习模式功能
     - 准备文档更新内容（任务 6.1）
     - 协调各角色任务进度
   - **交付物**：
     - 功能验收报告
     - 文档更新计划

---

### 9.2 下周任务计划（2024-12-23 起）

#### 📋 编程专家任务

1. **任务 7.3.1：优化 wordProgress 表索引**（P1，4 小时）
   - **前提**：任务 7.1.1 完成，获得评估报告
   - **截止时间**：2024-12-27

2. **任务 7.4.1：实现数据一致性检查与修复**（P1，6 小时）
   - **前提**：任务 7.1.1 完成
   - **协作角色**：产品经理专家（确认修复策略的用户体验）
   - **截止时间**：2024-12-29

3. **任务 A2 实施**（P1，8 小时）
   - **前提**：高级架构师完成 A2 设计
   - **截止时间**：2024-12-29

#### 🏗️ 高级架构师任务

1. **任务 A3：性能优化架构设计**（P1，20 小时）
   - **设计阶段**：8 小时
   - **协作角色**：数据库设计专家（确认索引优化策略）
   - **截止时间**：2024-12-30

#### 🧪 测试专家任务

1. **任务 A5 实施**（P1，16 小时）
   - **前提**：高级架构师完成 A5 设计
   - **截止时间**：2024-12-30

---

### 9.3 任务优先级说明

**P0（核心功能，必须完成）**：
- 任务 7.1.1：数据库架构全面评估

**P1（重要功能，优先完成）**：
- 任务 4.1：统一设计风格
- 任务 A2：错误处理与监控体系
- 任务 A5：测试架构设计
- 任务 7.3.1：优化 wordProgress 表索引
- 任务 7.4.1：实现数据一致性检查与修复
- 任务 5.1：功能测试

**P2（优化功能，可延后）**：
- 任务 7.3.2：优化 reviewLogs 表索引
- 任务 7.5.1：实现 reviewLogs 数据归档
- 任务 7.6.1：实现查询缓存机制
- 任务 A1：状态管理架构优化（可选）
- 任务 A4：数据迁移与版本管理优化

---

### 9.4 关键里程碑

- **2024-12-21**：任务 7.1.1 完成，数据库架构评估报告交付
- **2024-12-22**：任务 A2 设计完成，编程专家可开始实施
- **2024-12-23**：任务 4.1 完成，UI 风格统一
- **2024-12-26**：任务 A5 设计完成，测试架构确定
- **2024-12-29**：任务 7.3.1、7.4.1、A2 实施完成
- **2024-12-30**：任务 A3 设计完成，A5 实施完成

---

### 9.5 风险提示

1. **任务 7.1.1 延期风险**：如果数据库评估延期，会影响后续优化任务
   - **缓解措施**：优先保证 P0 任务完成，必要时调整其他任务优先级

2. **架构设计延期风险**：如果 A2、A5 设计延期，会阻塞编程专家实施
   - **缓解措施**：高级架构师优先完成设计，编程专家可并行进行不依赖架构的任务

3. **测试准备不足风险**：如果测试用例准备不足，会影响功能测试质量
   - **缓解措施**：测试专家提前准备，熟悉功能，等待架构设计完成后立即开始

---

**最后更新时间**：2024-12-19
**下次更新计划**：2024-12-21（任务 7.1.1 完成后）
````
