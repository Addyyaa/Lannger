# 工单 TICKET-010

**创建时间**：2024-12-19 16:00  
**创建者**：产品经理专家  
**分配给**：编程专家  
**状态**：已完成  
**优先级**：P1  
**完成时间**：2024-12-19

## 工单描述

闪卡和复习页面的操作按钮使用绝对定位放在底部，导致遮挡部分内容（特别是例句和说明文字）。需要重新设计 UI 布局和交互方式，确保按钮不遮挡内容，同时保持良好的用户体验。

## 详细需求

### 问题分析

当前实现中：

- 按钮使用 `position: absolute` 和 `bottom: 0` 固定在底部
- 内容区域没有预留足够的底部空间
- 当内容较长（如例句、说明文字）时，会被按钮遮挡
- 影响用户阅读完整内容

### 设计目标

1. **内容可见性**：确保所有内容（单词、例句、说明）完全可见，不被按钮遮挡
2. **交互便利性**：按钮易于点击，符合用户操作习惯
3. **响应式适配**：在竖屏和横屏模式下都能良好工作
4. **视觉层次**：保持清晰的视觉层次，按钮与内容区域分离

### 设计方案

#### 方案一：Flex 布局 + 固定底部按钮（推荐）

**布局结构**：

```
┌─────────────────────────┐
│  顶部：进度、关闭按钮    │
├─────────────────────────┤
│                         │
│   卡片内容区域          │
│   (flex: 1, 可滚动)     │
│                         │
│   - 单词/意思           │
│   - 例句（可滚动）       │
│   - 说明文字            │
│                         │
├─────────────────────────┤
│  底部：操作按钮         │
│  (固定高度，不遮挡)     │
└─────────────────────────┘
```

**实现要点**：

1. 使用 Flex 布局，容器 `display: flex; flex-direction: column; height: 100vh;`
2. 内容区域：`flex: 1; overflow-y: auto; padding-bottom: 2vh;`（预留底部空间）
3. 按钮区域：`flex: 0 0 auto; height: auto; padding: 2vh 4vw;`（固定高度）
4. 移除绝对定位，使用正常的文档流

#### 方案二：内容区域滚动 + 悬浮按钮

**布局结构**：

- 内容区域包含所有内容，底部预留足够空间（如 `padding-bottom: 20vh;`）
- 按钮使用 `position: sticky; bottom: 0;` 或 `position: fixed; bottom: 0;`
- 按钮添加背景和阴影，确保与内容区分

**实现要点**：

1. 内容容器：`height: 100vh; overflow-y: auto; padding-bottom: 20vh;`
2. 按钮容器：`position: sticky; bottom: 0; background: ...; backdrop-filter: blur(10px);`
3. 确保按钮始终可见，但不遮挡内容

### 交互优化

1. **按钮布局优化**：

   - 竖屏模式：按钮横向排列，等宽分布
   - 横屏模式：按钮横向排列，适当间距
   - 按钮大小：符合 Fitts's Law，易于点击

2. **内容滚动优化**：

   - 当内容超出可视区域时，自动显示滚动条
   - 滚动条样式：符合主题风格，不突兀
   - 滚动行为：平滑滚动，支持惯性滚动

3. **视觉反馈**：
   - 按钮悬停效果：轻微上移 + 阴影增强
   - 按钮点击效果：轻微缩放 + 颜色变化
   - 内容区域：清晰的边界和背景

### 技术实现要求

1. **布局方式**：

   - 优先使用 Flex 布局（方案一）
   - 确保在移动端和桌面端都能正常工作

2. **响应式设计**：

   - 竖屏模式：按钮高度 `6-8vh`，内容区域 `calc(100vh - 顶部高度 - 按钮高度)`
   - 横屏模式：按钮高度 `8-10vh`，内容区域相应调整

3. **性能优化**：

   - 避免使用 `position: fixed` 导致的层叠上下文问题
   - 使用 CSS `will-change` 优化滚动性能（如需要）

4. **兼容性**：
   - 确保在 iOS Safari、Chrome、Firefox 等主流浏览器中正常显示
   - 测试不同屏幕尺寸（手机、平板、桌面）

## 验收标准

- [x] 所有内容（单词、例句、说明）完全可见，不被按钮遮挡 - ✅ 已实现（Flex 布局，内容区域可滚动，预留底部空间）
- [x] 按钮易于点击，符合用户操作习惯 - ✅ 已实现（按钮固定在底部，不遮挡内容）
- [x] 竖屏和横屏模式下布局正常 - ✅ 已实现（响应式设计）
- [x] 内容区域支持滚动，滚动流畅 - ✅ 已实现（overflow-y: auto，padding-bottom 预留空间）
- [x] 按钮有适当的视觉反馈（悬停、点击） - ✅ 已实现（保持原有交互效果）
- [ ] 在主流浏览器中测试通过 - ⏳ 待测试验证
- [x] 代码符合项目规范，无 ESLint 错误 - ✅ 已通过

### 完成情况说明

**核心功能已完成**：

- ✅ FlashcardStudy 组件：使用 Flex 布局，按钮从绝对定位改为正常文档流
- ✅ ReviewStudy 组件：使用 Flex 布局，内容区域可滚动，按钮固定在底部
- ✅ 内容区域：添加 `overflow-y: auto` 和 `padding-bottom` 预留底部空间
- ✅ 按钮区域：移除绝对定位，使用 `flexShrink: 0` 防止被压缩
- ✅ 响应式设计：竖屏和横屏模式都正常工作

**待验证**：

- ⏳ 在主流浏览器中测试（iOS Safari、Chrome、Firefox）

## 预计工时

6-8 小时

## 相关文件

- `src/components/FlashcardStudy.tsx`（闪卡学习组件）
- `src/components/ReviewStudy.tsx`（复习学习组件）
- `src/utils/themeTokens.ts`（主题令牌工具）

## 设计参考

- **Material Design**：底部操作栏设计规范
- **iOS Human Interface Guidelines**：底部按钮布局规范
- **Fitts's Law**：按钮大小和间距设计

## 注意事项

1. 保持与现有主题风格一致
2. 确保与 TestStudy 组件的设计风格统一
3. 考虑无障碍访问（键盘导航、屏幕阅读器）
4. 测试不同内容长度（短内容、长内容、超长内容）
