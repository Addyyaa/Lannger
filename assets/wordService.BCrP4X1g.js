import{e as w,d as f,D as a,a as s}from"./index.CqHl6Qj4.js";async function m(n){await w();const i=await f.wordSets.toArray();let r;n&&n.length>0?r=i.filter(t=>n.includes(t.id)&&t.id!==a&&t.name!==s):r=i.filter(t=>t.id!==a&&t.name!==s);const g=new Set(r.map(t=>t.id)),D=(await f.words.toArray()).filter(t=>t.setId===void 0||t.setId===null?!1:g.has(t.setId)||t.setId===a&&(!n||n.includes(a))).map(t=>{if(t.setId===a){const{setId:c,...d}=t;return{...d,wordSet:s}}const o=i.find(c=>c.id===t.setId);if(o){const{setId:c,...d}=t;return{...d,wordSet:o.name}}const{setId:l,...e}=t;return{...e,wordSet:s}}),u={wordSets:r,words:D};if(!n||n.length===0){const t=JSON.stringify(u,null,2),o=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(o),e=document.createElement("a");e.href=l,e.download="langggerDB.json",e.click(),URL.revokeObjectURL(l)}return u}export{m as backupDatabase};
